{# Navigation component - pass 'active_page' to highlight current page #}
{# Usage: {% include 'includes/navigation.html.j2' with active_page='dashboard' %} #}

<style>
    /* Navigation layout with admin dropdown right-aligned */
    .main-nav {
        display: flex;
        align-items: center;
        position: relative;
    }

    /* Active navigation item with underline */
    .nav-item.active {
        font-weight: bold;
        border-bottom: 2px solid var(--color-border-primary);
    }

    /* Admin dropdown container */
    .admin-dropdown {
        margin-left: auto;  /* Push to the right */
        position: relative;
    }

    /* Admin dropdown button */
    .admin-dropdown > .nav-item {
        cursor: pointer;
        position: relative;
        padding-right: 20px;  /* Space for arrow */
    }

    /* Dropdown arrow */
    .admin-dropdown > .nav-item::after {
        content: 'â–¼';
        position: absolute;
        right: 5px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 10px;
        transition: transform 0.2s;
    }

    /* Rotate arrow when hovered */
    .admin-dropdown:hover > .nav-item::after {
        transform: translateY(-50%) rotate(180deg);
    }

    /* Dropdown menu */
    .admin-menu {
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        border: 1px solid var(--color-border-primary);
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        min-width: 150px;
        display: none;
        z-index: 1000;
        margin-top: 5px;
    }

    /* Show menu on hover */
    .admin-dropdown:hover .admin-menu {
        display: block;
    }

    /* Dropdown menu items */
    .admin-menu a {
        display: block;
        padding: 10px 15px;
        color: inherit;
        text-decoration: none;
        white-space: nowrap;
        border-bottom: 1px solid #eee;
    }

    .admin-menu a:last-child {
        border-bottom: none;
    }

    .admin-menu a:hover {
        background: #f5f5f5;
    }

    /* Active state for admin menu items */
    .admin-menu a.active {
        font-weight: bold;
        background: #f0f0f0;
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
        .admin-menu {
            background: #2a2a2a;
            border-color: #444;
        }

        .admin-menu a {
            border-bottom-color: #444;
        }

        .admin-menu a:hover {
            background: #333;
        }

        .admin-menu a.active {
            background: #3a3a3a;
        }
    }
</style>

<!-- Navigation -->
<nav class="main-nav" role="navigation" aria-label="Main navigation">
    <a href="/" class="nav-item{% if active_page == 'dashboard' %} active{% endif %}">Dashboard</a>
    <a href="/detections" class="nav-item{% if active_page == 'detections' %} active{% endif %}">Detections</a>
    <a href="/reports/best" class="nav-item{% if active_page == 'best' %} active{% endif %}">Best Recordings</a>
    <a href="/livestream" class="nav-item{% if active_page == 'livestream' %} active{% endif %}">Audio Stream</a>
    <a href="/reports/analysis" class="nav-item{% if active_page == 'analysis' %} active{% endif %}">Analysis</a>
    <a href="/docs" class="nav-item{% if active_page == 'api' %} active{% endif %}">API</a>

    <!-- Admin dropdown (right-aligned) -->
    <div class="admin-dropdown">
        <span class="nav-item{% if active_page in ['settings', 'logs', 'database'] %} active{% endif %}">Admin</span>
        <div class="admin-menu">
            <a href="/admin/settings" class="{% if active_page == 'settings' %}active{% endif %}">Settings</a>
            <a href="/admin/logs" class="{% if active_page == 'logs' %}active{% endif %}">Logs</a>
            <a href="/admin/database" class="{% if active_page == 'database' %}active{% endif %}">Database</a>
        </div>
    </div>
</nav>
