#  This file is part of systemd.
#
#  systemd is free software; you can redistribute it and/or modify it
#  under the terms of the GNU Lesser General Public License as published by
#  the Free Software Foundation; either version 2.1 of the License, or
#  (at your option) any later version.
#
# Entries in this file show the compile time defaults.
# You can change settings by editing this file.
# Defaults can be restored by simply deleting this file.
#
# See journald.conf(5) for details.

[Journal]
# Storage: Store logs in memory/tmpfs to reduce SD card writes
# For SBC deployments, this prevents excessive wear on SD cards
Storage=volatile

# SystemMaxUse: Limit memory usage for logs (important for SBC with limited RAM)
# Set to 64MB to balance logging capability with memory constraints
SystemMaxUse=64M

# SystemMaxFileSize: Maximum size of individual journal files
SystemMaxFileSize=8M

# SystemMaxFiles: Maximum number of journal files to keep
SystemMaxFiles=8

# MaxRetentionSec: Keep logs for 24 hours maximum
# This prevents accumulation while providing sufficient debugging window
MaxRetentionSec=24h

# MaxFileSec: Force rotation every hour to prevent large files
MaxFileSec=1h

# ForwardToSyslog: Don't forward to syslog to avoid duplicate logging
ForwardToSyslog=no

# ForwardToKMsg: Don't forward to kernel ring buffer
ForwardToKMsg=no

# ForwardToConsole: Don't forward to console (reduces noise)
ForwardToConsole=no

# ForwardToWall: Don't broadcast messages to all logged-in users
ForwardToWall=no

# TTYPath: Path to TTY for console forwarding (disabled above)
# TTYPath=/dev/console

# MaxLevelStore: Store all log levels (debug through emergency)
MaxLevelStore=debug

# MaxLevelSyslog: Don't forward to syslog (disabled above)
MaxLevelSyslog=debug

# MaxLevelKMsg: Don't forward to kmsg (disabled above)
MaxLevelKMsg=notice

# MaxLevelConsole: Don't forward to console (disabled above)
MaxLevelConsole=info

# MaxLevelWall: Don't broadcast messages (disabled above)
MaxLevelWall=emerg

# LineMax: Maximum line length for log entries
LineMax=48K

# ReadKMsg: Read kernel messages
ReadKMsg=yes

# Audit: Receive audit messages from kernel
Audit=yes

# SplitMode: Split journal files by UID
SplitMode=uid

# SyncIntervalSec: Sync to disk interval (for persistent storage)
# Since we use volatile storage, this has minimal impact
SyncIntervalSec=5m

# RateLimitIntervalSec: Rate limiting interval for identical messages
RateLimitIntervalSec=30s

# RateLimitBurst: Number of messages to allow in rate limit interval
RateLimitBurst=10000

# Compress: Enable compression to save memory
Compress=yes

# Seal: Seal journal files (requires persistent storage, disabled for volatile)
Seal=no
