# BirdNET-Pi Configuration Template
# This file provides default configuration values for a new BirdNET-Pi installation

# Configuration Version (for compatibility checks and version migrations)
config_version: "2.0.0"

# Basic Settings
site_name: BirdNET-Pi
latitude: 0.0
longitude: 0.0
model: BirdNET_GLOBAL_6K_V2.4_Model_FP16
metadata_model: BirdNET_GLOBAL_6K_V2.4_MData_Model_FP16
species_confidence_threshold: 0.70  # Minimum confidence threshold for species detection
sensitivity_setting: 1.25
audio_overlap: 0.50  # Overlap between audio segments (0.0 to 3.0)
audio_device_index: -1  # -1 for system default
sample_rate: 48000
audio_channels: 1

# Logging Configuration - Structlog with environment awareness
logging:
  level: INFO
  json_logs: null  # null = auto-detect, true = force JSON, false = force human-readable
  include_caller: false  # Include file:line info for debugging
  extra_fields:
    service: birdnet-pi
    # version and deployment are auto-detected from git/environment
    # site_name and location are automatically added from config

# External Service Integration
birdweather_id: ""

# ============ NOTIFICATION CONFIGURATION ============

# Named notification targets for different services
# These are reusable across multiple notification rules

# Apprise service URLs (supports 80+ notification services)
# See: https://github.com/caronc/apprise/wiki
apprise_targets:
  # Examples:
  # email: "mailto://username:password@gmail.com"
  # discord: "discord://webhook_id/webhook_token"
  # sms: "twilio://AccountSid:AuthToken@FromPhoneNo/ToPhoneNo"
  # slack: "slack://TokenA/TokenB/TokenC"

# Webhook endpoints for external integrations
webhook_targets:
  # Examples:
  # home_assistant: "http://192.168.1.100:8123/api/webhook/birdnet"
  # ifttt: "https://maker.ifttt.com/trigger/bird_detected/with/key/YOUR_KEY"

# Default message templates (Jinja2 supported)
# Available variables: {{ common_name }}, {{ scientific_name }}, {{ confidence }},
# {{ timestamp }}, {{ audio_file }}, {{ detection_count }}, {{ species_count }}
notification_title_default: "BirdNET-Pi: {{ common_name }}"
notification_body_default: "Detected {{ common_name }} ({{ scientific_name }}) at {{ confidence }}% confidence"

# Notification Rules - Define when and how to send notifications
notification_rules: []
  # Example rules (uncomment and modify as needed):

  # - name: "Rare Bird Alerts"
  #   enabled: true
  #   service: "apprise"           # apprise, webhook, or mqtt
  #   target: "discord"             # Target name from apprise_targets/webhook_targets, or MQTT topic
  #   frequency:
  #     when: "immediate"           # immediate, daily, or weekly
  #   scope: "new_ever"             # all, new_ever, new_today, new_this_week
  #   include_taxa: {}              # Taxonomic filters (orders, families, genera, species)
  #   exclude_taxa:
  #     species: ["Passer domesticus"]  # Exclude House Sparrows
  #   minimum_confidence: 80        # Override detection threshold
  #   title_template: "ðŸ¦… NEW SPECIES: {{ common_name }}!"
  #   body_template: ""             # Empty = use default

  # - name: "Daily Summary Email"
  #   enabled: true
  #   service: "apprise"
  #   target: "email"
  #   frequency:
  #     when: "daily"
  #     time: "08:00"               # 24-hour format
  #   scope: "all"
  #   include_taxa: {}
  #   exclude_taxa: {}
  #   minimum_confidence: 0         # 0 = use species threshold
  #   title_template: ""
  #   body_template: ""

  # - name: "Weekly Owl Report"
  #   enabled: false
  #   service: "apprise"
  #   target: "email"
  #   frequency:
  #     when: "weekly"
  #     day: "sunday"               # monday through sunday
  #     time: "20:00"
  #   scope: "new_this_week"
  #   include_taxa:
  #     orders: ["Strigiformes"]    # All owls
  #   exclude_taxa: {}
  #   minimum_confidence: 60
  #   title_template: "Weekly Owl Report"
  #   body_template: "This week's owls: {{ species_list }}"

  # - name: "MQTT All Detections"
  #   enabled: true
  #   service: "mqtt"
  #   target: "birdnet/detections/all"  # MQTT topic
  #   frequency:
  #     when: "immediate"
  #   scope: "all"
  #   include_taxa: {}
  #   exclude_taxa: {}
  #   minimum_confidence: 0
  #   title_template: ""
  #   body_template: ""

# Global notification settings
notify_quiet_hours_start: ""    # e.g., "22:00" for 10 PM (empty = no quiet hours)
notify_quiet_hours_end: ""      # e.g., "06:00" for 6 AM

# Flickr Integration
flickr_api_key: ""
flickr_filter_email: ""

# Localization and Species Display
language: en  # Language code for UI and species name translation
species_display_mode: full  # Options: "full" (Common Name (Scientific Name)), "common_name", "scientific_name"
timezone: UTC

# Field Mode and GPS Settings
enable_gps: false
gps_update_interval: 5.0

# Hardware Monitoring
hardware_check_interval: 10.0
enable_audio_device_check: true
enable_system_resource_check: true
enable_gps_check: false

# Analysis Configuration
privacy_threshold: 10.0

# MQTT Integration Settings
enable_mqtt: false
mqtt_broker_host: localhost
mqtt_broker_port: 1883
mqtt_username: ""
mqtt_password: ""
mqtt_topic_prefix: birdnet
mqtt_client_id: birdnet-pi

# Webhook Integration Settings
enable_webhooks: false
webhook_urls: []  # List of webhook URLs, e.g., ["http://example.com/webhook", "http://another.com/hook"]
webhook_events: detection,health,gps,system

# Git Update Settings
git_remote: origin  # Git remote name for updates
git_branch: main    # Git branch name for updates

# Detection Processing
detections_endpoint: "http://127.0.0.1:8888/api/detections/"  # Where to send detections (can be remote)
